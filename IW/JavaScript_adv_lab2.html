<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>lab2</title>
    <script>
        // 계좌 객체 생성
        let account = {
            owner: "",
            bank: "",
            balance: 0,
            updatetime: "",

            // 등록 메소드
            register: function() {
                let input = prompt("이름,은행");
                if (input.indexOf(",") === -1) {
                    alert("양식이 잘못되었습니다.");
                    this.register();
                } else {
                    let details = input.split(",");
                    this.owner = details[0].trim();
                    this.bank = details[1].trim();
                }
            },

            // 조회 메소드
            inquiry: function() {
                alert("잔액 : " + this.balance);
            },

            // 입금 메소드
            deposit: function() {
                let amount = parseInt(prompt("입금액"));
                if (isNaN(amount)) {
                    alert("숫자를 입력하세요");
                } else {
                    this.balance += amount;
                    this.updatetime = new Date().toLocaleString();
                    this.inquiry();
                }
            },

            // 출금 메소드
            withdraw: function() {
                let amount = parseInt(prompt("출금액"));
                if (isNaN(amount)) {
                    alert("숫자를 입력하세요");
                } else if (amount > this.balance) {
                    alert("잔액 부족");
                } else {
                    this.balance -= amount;
                    this.updatetime = new Date().toLocaleString();
                    this.inquiry();
                }
            },

            // 마지막 거래 시간 메소드
            time: function() {
                alert("마지막 입출금 시간은 " + this.updatetime);
            },

            // 사용자 정보 메소드
            info: function() {
                alert("이름 : " + this.owner + " | " + "은행 : " + this.bank + " | " + "잔액 : " + this.balance);
            }
        };

        // 페이지가 로드될 때 register 메소드 실행
        window.onload = function() {
            account.register();
        }
    </script>
</head>

<body>
    <button type="button" onclick="account.inquiry()">조회</button>
    <button type="button" onclick="account.deposit()">입금</button>
    <button type="button" onclick="account.withdraw()">출금</button>
    <button type="button" onclick="account.time()">입출금 시간</button>
    <button type="button" onclick="account.info()">사용자 정보</button>
</body>
</html>